{"version":3,"sources":["../../src/parser/SourceCode.js"],"names":["SourceCode","text","index","contextLocations","pairMark","push","findIndex","context","key","splice","length","some","contextLocation","read","undefined"],"mappings":"AAAA;AACA;;;;;;;;;;;;;IAEaA,U;;;AACT,sBAAYC,IAAZ,EAAkB;AAAA;;AACd,SAAKA,IAAL,GAAYA,IAAZ;AACA,SAAKC,KAAL,GAAa,CAAb;AACA;;AACA,SAAKC,gBAAL,GAAwB,EAAxB;AACH;;;;iCAEYC,Q,EAAU;AACnB,WAAKD,gBAAL,CAAsBE,IAAtB,CAA2B;AACvBH,QAAAA,KAAK,EAAE,KAAKA,KAAL,GAAa,CADG;AAEvBE,QAAAA,QAAQ,EAARA;AAFuB,OAA3B;AAIH;;;iCAEYA,Q,EAAU;AACnB,UAAMF,KAAK,GAAG,KAAKC,gBAAL,CAAsBG,SAAtB,CAAgC,UAAAC,OAAO,EAAI;AACrD,eAAOA,OAAO,CAACH,QAAR,CAAiBI,GAAjB,KAAyBJ,QAAQ,CAACI,GAAzC;AACH,OAFa,CAAd;;AAGA,UAAIN,KAAK,KAAK,CAAC,CAAf,EAAkB;AACd,aAAKC,gBAAL,CAAsBM,MAAtB,CAA6BP,KAA7B,EAAoC,CAApC;AACH;AACJ;;;gCAEWE,Q,EAAU;AAClB,UAAI,CAACA,QAAL,EAAe;AACX,eAAO,KAAKD,gBAAL,CAAsBO,MAAtB,GAA+B,CAAtC;AACH;;AACD,aAAO,KAAKP,gBAAL,CAAsBQ,IAAtB,CAA2B,UAAAC,eAAe;AAAA,eAAIA,eAAe,CAACR,QAAhB,CAAyBI,GAAzB,KAAiCJ,QAAQ,CAACI,GAA9C;AAAA,OAA1C,CAAP;AACH;AAED;;;;;;2BAOO;AACH,aAAO,KAAKP,IAAL,CAAU,KAAKC,KAAf,CAAP;AACH;;;2BAEe;AAAA,UAAXA,KAAW,uEAAH,CAAG;AACZ,WAAKA,KAAL,IAAcA,KAAd;AACH;;;wBAVa;AACV,aAAO,KAAKW,IAAL,OAAgBC,SAAvB;AACH","sourcesContent":["// MIT Â© 2018 azu\n\"use strict\";\n\nexport class SourceCode {\n    constructor(text) {\n        this.text = text;\n        this.index = 0;\n        /** @type {{index:number, pairMark: PairMark}}[] */\n        this.contextLocations = [];\n    }\n\n    enterContext(pairMark) {\n        this.contextLocations.push({\n            index: this.index + 1,\n            pairMark\n        });\n    }\n\n    leaveContext(pairMark) {\n        const index = this.contextLocations.findIndex(context => {\n            return context.pairMark.key === pairMark.key;\n        });\n        if (index !== -1) {\n            this.contextLocations.splice(index, 1);\n        }\n    }\n\n    isInContext(pairMark) {\n        if (!pairMark) {\n            return this.contextLocations.length > 0;\n        }\n        return this.contextLocations.some(contextLocation => contextLocation.pairMark.key === pairMark.key);\n    }\n\n    /**\n     * Return true, no more read char\n     */\n    get canRead() {\n        return this.read() !== undefined;\n    }\n\n    read() {\n        return this.text[this.index];\n    }\n\n    peek(index = 1) {\n        this.index += index;\n    }\n}\n"],"file":"SourceCode.js"}